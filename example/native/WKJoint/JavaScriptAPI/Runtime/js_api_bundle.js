!function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};function t(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,t){return e(t={exports:{}},t.exports),t.exports}var o=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){this.resolve=e,this.reject=t}}();t.DelayedPromise=n;var r=function(){return function(e,t,n){this.promiseID=e,this.func=t,this.arg=n}}(),o=function(){function e(){this.devMode=!1,this.promises={},this.promiseCounter=0;var e=window;this.webkit=e.webkit}return e.prototype.beginPromise=function(e,t,o){var i=this;if(!e||!t){var u="BeginPromise: argument null: "+e+"."+t;return this.log(u),Promise.reject(u)}return new Promise(function(u,s){try{if(i.webkit&&i.webkit.messageHandlers){var a=i.webkit.messageHandlers[e];if(a&&"function"==typeof a.postMessage){var c=i.generateID(),f=new n(u,s);i.promises[c]=f,i.log("BeginPromise: "+e+"."+t+" ["+c+"]");var l=new r(c,t,o||{});return void a.postMessage(l)}var p='The namespace "'+e+'" does not exist';return i.log(p),void s(p)}}catch(e){p="BeginPromise: exception: "+JSON.stringify(e);return i.log(p),void s(p)}})},e.prototype.endPromise=function(e,t,n){this.log("EndPromise: ["+e+"] data: "+JSON.stringify(t)+", error: "+JSON.stringify(n));var r=this.promises[e];r?(n?r.reject(n?n.value:void 0):r.resolve(t?t.value:void 0),delete this.promises[e]):this.log("EndPromise: not found")},e.prototype.generateID=function(){return this.promiseCounter++,"p-"+this.promiseCounter},e.prototype.log=function(e){this.devMode&&console.log(e)},e}();t.Runtime=o});n(o);o.DelayedPromise,o.Runtime;var i=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.name=e,this.runtime=t}return e.prototype.invoke=function(e,t){return this.runtime.beginPromise(this.name,e,t)},e}();t.default=n});n(i);var u=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=window;return!n[e]&&(n[e]=t,!0)}});n(u);var s=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Runtime=o.Runtime,t.Namespace=i.default,t.inject=u.default});n(s);var a=s.Runtime,c=s.Namespace,f=s.inject,l=function(e){function n(t){return e.call(this,"factory",t)||this}return t(n,e),n.prototype.array=function(){return this.invoke("array",null)},n.prototype.encodableObject=function(){return this.invoke("encodableObject",null)},n}(c),p=function(e){function n(t){return e.call(this,"math",t)||this}return t(n,e),n.prototype.add=function(e){return this.invoke("add",e).then(function(e){return e})},n}(c),h=function(e){function n(t){return e.call(this,"alert",t)||this}return t(n,e),n.prototype.sheetAsync=function(){return this.invoke("sheetAsync",null)},n}(c),d=function(){return function(e){this.math=new p(e),this.alert=new h(e),this.factory=new l(e)}}();!function(){var e=new a,t=new d(e);f("__WKJoint",e),f("MyJavaScriptAPI",t)}()}();
