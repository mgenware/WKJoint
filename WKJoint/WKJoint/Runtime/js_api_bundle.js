!function(){"use strict";function t(t,n){function e(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var n=function(){return function(t,n){this.resolve=t,this.reject=n}}(),e=function(){return function(t,n,e){this.promiseID=t,this.func=n,this.arg=e}}(),i=function(){function t(){this.promises={},this.promiseCounter=0;var t=window;this.webkit=t.webkit}return t.prototype.beginPromise=function(t,i,o){var r=this;if(!t||!i){var s="BeginPromise: argument null: "+t+"."+i;return this.log(s),Promise.reject(s)}return new Promise(function(s,u){var c=r.generateID(),a=new n(s,u);r.promises[c]=a,r.log("BeginPromise: "+t+"."+i+" ["+c+"]");try{if(r.webkit&&r.webkit.messageHandlers){var f=r.webkit.messageHandlers[t];if(f&&"function"==typeof f.postMessage){var p=new e(c,i,o||{});f.postMessage(p)}}}catch(t){r.log("BeginPromise: exception: "+JSON.stringify(t))}})},t.prototype.endPromise=function(t,n,e){this.log("EndPromise: ["+t+"] data: "+JSON.stringify(n)+", error: "+JSON.stringify(e));var i=this.promises[t];i?(e?i.reject(e?e.default:void 0):i.resolve(n?n.default:void 0),delete this.promises[t]):this.log("EndPromise: not found")},t.prototype.generateID=function(){return this.promiseCounter++,"p-"+this.promiseCounter},t.prototype.log=function(t){this.devMode&&console.log(t)},t}(),o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])},r=function(){function t(t,n){this.name=t,this.runtime=n}return t.prototype.invoke=function(t,n){return this.runtime.beginPromise(this.name,t,n)},t}(),s=function(n){function e(t){return n.call(this,"math",t)||this}return t(e,n),e.prototype.add=function(t){return this.invoke("add",t).then(function(t){return t})},e}(r),u=function(n){function e(t){return n.call(this,"alert",t)||this}return t(e,n),e.prototype.sheetAsync=function(){return this.invoke("sheetAsync",null)},e}(r),c=function(){return function(t){this.math=new s(t),this.alert=new u(t)}}();!function(){var t=window;t.__WKJoint||(t.__WKJoint=new i);var n=t.__WKJoint;t.MyJavaScriptAPI||(t.MyJavaScriptAPI=new c(n))}()}();
