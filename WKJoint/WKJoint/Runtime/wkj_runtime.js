"use strict";var DelayedPromise=function(){return function(e,i){this.resolve=e,this.reject=i}}(),WKJCall=function(){return function(e,i,t){this.promiseID=e,this.func=i,this.arg=t}}(),WKJointRuntime=function(){function e(){this.promises={}}return e.prototype.beginPromise=function(e,i,t){var n=this;if(!e||!i)return this.log("BeginPromise: argument null: "+e+"."+i),null;return new Promise(function(o,r){var s=n.uuidv4(),u=new DelayedPromise(o,r);n.promises[s]=u,n.log("BeginPromise: "+e+"."+i+" ["+s+"]");try{var x=window;if(x.webkit&&x.webkit.messageHandlers){var a=x.webkit.messageHandlers[e];if(a&&"function"==typeof a.postMessage){var l=new WKJCall(s,i,t);a.postMessage(l)}}}catch(e){n.log("BeginPromise: exception: "+JSON.stringify(e))}})},e.prototype.endPromise=function(e,i,t){this.log("EndPromise: ["+e+"] data: "+JSON.stringify(i)+", error: "+JSON.stringify(t));var n=this.promises[e];n?(t?n.reject(t?t.default:void 0):n.resolve(i?i.default:void 0),delete this.promises[e]):this.log("EndPromise: not found")},e.prototype.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=16*Math.random()|0;return("x"==e?i:3&i|8).toString(16)})},e.prototype.log=function(e){this.devMode&&console.log(e)},e}(),wind=window;wind.__WKJoint||(wind.__WKJoint=new WKJointRuntime);