"use strict";var DelayedPromise=function(){return function(e,i){this.resolve=e,this.reject=i}}(),WKJCall=function(){return function(e,i,t){this.promiseID=e,this.func=i,this.arg=t}}(),WKJointRuntime=function(){function e(){this.promises={},this.promiseCounter=0}return e.prototype.beginPromise=function(e,i,t){var n=this;if(!e||!i)return this.log("BeginPromise: argument null: "+e+"."+i),null;return new Promise(function(o,r){var s=n.generateID(),u=new DelayedPromise(o,r);n.promises[s]=u,n.log("BeginPromise: "+e+"."+i+" ["+s+"]");try{var a=window;if(a.webkit&&a.webkit.messageHandlers){var l=a.webkit.messageHandlers[e];if(l&&"function"==typeof l.postMessage){var f=new WKJCall(s,i,t);l.postMessage(f)}}}catch(e){n.log("BeginPromise: exception: "+JSON.stringify(e))}})},e.prototype.endPromise=function(e,i,t){this.log("EndPromise: ["+e+"] data: "+JSON.stringify(i)+", error: "+JSON.stringify(t));var n=this.promises[e];n?(t?n.reject(t?t.default:void 0):n.resolve(i?i.default:void 0),delete this.promises[e]):this.log("EndPromise: not found")},e.prototype.generateID=function(){return this.promiseCounter++,"p-"+this.promiseCounter},e.prototype.log=function(e){this.devMode&&console.log(e)},e}(),wind=window;wind.__WKJoint||(wind.__WKJoint=new WKJointRuntime);