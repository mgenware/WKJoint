"use strict";var DelayedPromise=function(){return function(){}}(),WKJCall=function(){return function(e,i,n){this.promiseID=e,this.func=i,this.arg=n}}(),WKJointRuntime=function(){function e(){this.promises={}}return e.prototype.beginPromise=function(e,i,n){var t=this;if(!e||!i)return this.log("BeginPromise: argument null: "+e+"."+i),null;return new Promise(function(o,r){var s=t.uuidv4(),u=new DelayedPromise;u.resolve=o,u.reject=r,t.promises[s]=u,t.log("BeginPromise: "+e+"."+i+" ["+s+"]");try{var x=window;if(x.webkit&&x.webkit.messageHandlers){var a=x.webkit.messageHandlers[e];if(a&&"function"==typeof a.postMessage){var l=new WKJCall(s,i,n);a.postMessage(l)}}}catch(e){t.log("BeginPromise: exception: "+JSON.stringify(e))}})},e.prototype.endPromise=function(e,i,n){this.log("EndPromise: ["+e+"] data: "+JSON.stringify(i)+", error: "+JSON.stringify(n));var t=this.promises[e];t?(n?t.reject(n?n.default:void 0):t.resolve(i?i.default:void 0),delete this.promises[e]):this.log("EndPromise: not found")},e.prototype.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=16*Math.random()|0;return("x"==e?i:3&i|8).toString(16)})},e.prototype.log=function(e){this.devMode&&console.log(e)},e}(),wind=window;wind.__WKJoint||(wind.__WKJoint=new WKJointRuntime);